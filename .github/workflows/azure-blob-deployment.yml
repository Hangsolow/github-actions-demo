name: Interact with Azure ressources via OIDC
concurrency: test

on:
  push:
    branches:
      - "test/*"
      - main

permissions:
  id-token: write
  contents: read
    
jobs:
  frontend:
    uses: ./.github/workflows/reuseable-deployment-workflow.yml
    with:
      environment: ${{ vars.ENVIRONMENT_NAME }}
      environment_url: ${{ vars.ENVIRONMENT_URL }}
  summery:
    runs-on: ubuntu-latest
    needs: frontend
    steps:
      - name: Generate summery
        run: |
          echo "### Deployment of ${{ needs.frontend.outputs.next_version }}! to test environment :rocket:" >> $GITHUB_STEP_SUMMARY

